{"ast":null,"code":"import _slicedToArray from \"/Users/nolan/Documents/2019 - Projects/snow-data/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nolan/Documents/2019 - Projects/snow-data/src/components/Main.js\";\nimport React, { useEffect, useState } from 'react';\nimport styled from \"@emotion/styled\";\nimport size from \"../styles/size\";\nimport colors from '../styles/colors';\nimport { WeatherDetailsList } from './WeatherDetailsList';\nimport { SnowDetails } from './SnowDetails';\nimport { calNewSnowLastDay } from '../utils/calNewSnowLastDay';\nimport { Chart } from '../components/Chart';\nimport { data } from '../data/index';\nconst littleBearData = data.littleBearData,\n      coqSummitData = data.coqSummitData;\nconst Container = styled(\"main\")`\n    flex: 1;\n    grid-area: main;\n    padding: ${size.spacing};\n    overflow-y: auto;\n    overflow-x: hidden;\n    -webkit-overflow-scrolling: touch;\n    background-color: ${colors.main};\n\n    .dashboard {\n      --column-count: 3;\n      display: grid;\n      grid-template-columns: repeat(var(--column-count), 1fr);\n      grid-gap: ${size.spacing};\n    }\n\n    .column-item {\n      --column-count: 3;\n      flex-basis: calc(100%/var(--column-count));\n      grid-column-end: span 1;\n    }\n\n    .item-column {\n      flex: 1 1 50%;\n      grid-column-end: span 1;\n      padding: calc(var(${size.spacing}) / 2);\n      border: 1px solid grey;\n    }\n\n    .item-half {\n      flex: 1 1 50%;\n      height: 270px;\n      grid-column-end: span 2;\n      padding: calc(var(${size.spacing}) / 2);\n      border: 1px solid grey;\n    }\n\n    .item-full {\n      flex-basis: 100%;\n      grid-column: 1 / -1;\n    }\n`;\nexport const Main = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        lowerStationData = _useState2[0],\n        setLowerStationData = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        upperStationData = _useState4[0],\n        setUpperStationData = _useState4[1];\n\n  const _useState5 = useState({\n    lowerStationLastDay: null,\n    lowerStationLastTwoDay: null,\n    lowerStationLastWeek: null,\n    upperStationLastDay: null,\n    upperStationLastTwoDay: null,\n    upperStationLastWeek: null\n  }),\n        _useState6 = _slicedToArray(_useState5, 2),\n        newSnow = _useState6[0],\n        setNewSnow = _useState6[1];\n\n  const _useState7 = useState({\n    data: {\n      labels: [],\n      datasets: [{\n        label: \"\",\n        fill: false,\n        backgroundColor: \"\",\n        data: []\n      }, {\n        label: \"\",\n        fill: false,\n        backgroundColor: \"\",\n        data: []\n      }]\n    }\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        historicSnowData = _useState8[0],\n        setHistoricSnowData = _useState8[1];\n\n  useEffect(() => {\n    const getWeather = async station => {\n      const url = `https://wx.avalanche.ca/stations/${station}/measurements/`;\n      const response = await fetch(url);\n      const data = await response.json();\n      setLowerStationData(data);\n    };\n\n    getWeather(15);\n  }, []);\n  useEffect(() => {\n    const getWeather = async station => {\n      const url = `https://wx.avalanche.ca/stations/${station}/measurements/`;\n      const response = await fetch(url);\n      const data = await response.json();\n      setUpperStationData(data);\n    };\n\n    getWeather(17);\n  }, []);\n  useEffect(() => {\n    const lastDaySnowLowerStation = lowerStationData.slice(0, 23);\n    const newSnowLowerStation = lastDaySnowLowerStation.map(day => {\n      return day.snowHeight;\n    });\n    const lastDaySnowUpperStation = upperStationData.slice(0, 23);\n    const newSnowLitBear = lastDaySnowUpperStation.map(day => {\n      return day.snowHeight;\n    });\n    const lastTwoDaySnowCoqSum = coqSummitStationData.slice(0, 47);\n    const newTwoDaySnowCoqSum = lastTwoDaySnowCoqSum.map(day => {\n      return day.snowHeight;\n    });\n    const lastTwoDaySnowLitBea = littleBearStationData.slice(0, 47);\n    const newTwoDaySnowLitBear = lastTwoDaySnowLitBea.map(day => {\n      return day.snowHeight;\n    });\n    const lastWeekSnowCoqSum = coqSummitStationData.slice(0, 160);\n    const newLastWeekSnowCoqSum = lastWeekSnowCoqSum.map(day => {\n      return day.snowHeight;\n    });\n    const lastWeekSnowLitBea = littleBearStationData.slice(0, 160);\n    const newLastWeekSnowLitBear = lastWeekSnowLitBea.map(day => {\n      return day.snowHeight;\n    });\n    const getNewSnowCoqSum = calNewSnowLastDay(newSnowLowerStation);\n    const getNewSnowLitBea = calNewSnowLastDay(newSnowLitBear);\n    const getNewTwoSnowCoqSum = calNewSnowLastDay(newTwoDaySnowCoqSum);\n    const getNewTwoSnowLitBea = calNewSnowLastDay(newTwoDaySnowLitBear);\n    const getNewLastWeekSnowCoqSum = calNewSnowLastDay(newLastWeekSnowCoqSum);\n    const getNewLastWeekSnowLitBea = calNewSnowLastDay(newLastWeekSnowLitBear);\n    const sumNewSnowCoq = getNewSnowCoqSum.reduce((a, b) => a + b, 0);\n    const sumNewSnowLitBea = getNewSnowLitBea.reduce((a, b) => a + b, 0);\n    const sumNewTwoDaySnowCoq = getNewTwoSnowCoqSum.reduce((a, b) => a + b, 0);\n    const sumNewTwoDaySnowLitBea = getNewTwoSnowLitBea.reduce((a, b) => a + b, 0);\n    const sumNewLastWeekSnowCoq = getNewLastWeekSnowCoqSum.reduce((a, b) => a + b, 0);\n    const sumNewLastWeekSnowLitBea = getNewLastWeekSnowLitBea.reduce((a, b) => a + b, 0);\n    setNewSnow({\n      coqSummitLastDay: sumNewSnowCoq,\n      coqSummitLastTwoDay: sumNewTwoDaySnowCoq,\n      coqSummitLastWeek: sumNewLastWeekSnowCoq,\n      littleBearLastDay: sumNewSnowLitBea,\n      littleBearLastTwoDay: sumNewTwoDaySnowLitBea,\n      littleBearLastWeek: sumNewLastWeekSnowLitBea\n    });\n  }, [lowerStationData, upperStationData]);\n  useEffect(() => {\n    const getSnowPackData = arr => {\n      const dataArray = [];\n      const dateArray = [];\n\n      for (let i = 0; i < arr.length; i++) {\n        if (arr[i].date.charAt(11) === \"2\" && arr[i].date.charAt(12) === \"3\") {\n          dateArray.push(arr[i].date.slice(0, 10));\n          dataArray.push(arr[i].snowpack);\n        }\n      }\n\n      return {\n        dataArray,\n        dateArray\n      };\n    };\n\n    const littleBearSnowData = getSnowPackData(littleBearData);\n    const coqSummitSnowData = getSnowPackData(coqSummitData);\n    setHistoricSnowData({\n      data: {\n        labels: coqSummitSnowData.dateArray,\n        datasets: [{\n          label: \"1220m\",\n          backgroundColor: \"#50D8D7\",\n          data: coqSummitSnowData.dataArray\n        }, {\n          label: \"1660m\",\n          backgroundColor: \"#547AA5\",\n          data: littleBearSnowData.dataArray\n        }]\n      }\n    });\n  }, []);\n  const coqSummitName = \"Coquihalla Summit\";\n  const coqSummitElevation = \"1230m\";\n  const coqSummitStation = coqSummitStationData && coqSummitStationData[0];\n  const coqSummitTemp = coqSummitStation && coqSummitStation.airTempAvg;\n  const coqSummitNewSnowLastDay = newSnow && newSnow.coqSummitLastDay;\n  const coqSummitNewSnowLastTwoDay = newSnow && newSnow.coqSummitLastTwoDay;\n  const coqSummitNewSnowLastWeek = newSnow && newSnow.coqSummitLastWeek;\n  const coqSummitSnowDepth = coqSummitStation && coqSummitStation.snowHeight;\n  const littleBearName = \"Little Bear\";\n  const littleBearElevation = \"1660m\";\n  const littleBearStation = littleBearStationData && littleBearStationData[0];\n  const littleBearTemp = littleBearStation && littleBearStation.airTempAvg;\n  const littleBearNewSnowLastDay = newSnow && newSnow.littleBearLastDay;\n  const littleBearNewSnowTwoDay = newSnow && newSnow.littleBearLastTwoDay;\n  const littleBearNewSnowLastWeek = newSnow && newSnow.littleBearLastWeek;\n  const littleBearSnowDepth = littleBearStation && littleBearStation.snowHeight;\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"dashboard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"item-column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(WeatherDetailsList, {\n    highElevationName: littleBearName.toUpperCase(),\n    highElevation: littleBearElevation,\n    lowElevationName: coqSummitName.toUpperCase(),\n    lowElevation: coqSummitElevation,\n    highTemp: littleBearTemp,\n    lowTemp: coqSummitTemp,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"item-half\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(SnowDetails, {\n    lowElevationName: coqSummitName,\n    lowElevation: coqSummitElevation,\n    newSnowLastDayCoq: coqSummitNewSnowLastDay,\n    newSnowLastTwoDayCoq: coqSummitNewSnowLastTwoDay,\n    newSnowLastWeekCoq: coqSummitNewSnowLastWeek,\n    snowDepthCoq: coqSummitSnowDepth,\n    highElevationName: littleBearName,\n    highElevation: littleBearElevation,\n    newSnowLastDayLit: littleBearNewSnowLastDay,\n    newSnowLastTwoDayLit: littleBearNewSnowTwoDay,\n    newSnowLastWeekLit: littleBearNewSnowLastWeek,\n    snowDepthLit: littleBearSnowDepth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"item-full\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(Chart, {\n    data: historicSnowData.data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  })))));\n};","map":{"version":3,"sources":["/Users/nolan/Documents/2019 - Projects/snow-data/src/components/Main.js"],"names":["React","useEffect","useState","styled","size","colors","WeatherDetailsList","SnowDetails","calNewSnowLastDay","Chart","data","littleBearData","coqSummitData","Container","spacing","main","Main","lowerStationData","setLowerStationData","upperStationData","setUpperStationData","lowerStationLastDay","lowerStationLastTwoDay","lowerStationLastWeek","upperStationLastDay","upperStationLastTwoDay","upperStationLastWeek","newSnow","setNewSnow","labels","datasets","label","fill","backgroundColor","historicSnowData","setHistoricSnowData","getWeather","station","url","response","fetch","json","lastDaySnowLowerStation","slice","newSnowLowerStation","map","day","snowHeight","lastDaySnowUpperStation","newSnowLitBear","lastTwoDaySnowCoqSum","coqSummitStationData","newTwoDaySnowCoqSum","lastTwoDaySnowLitBea","littleBearStationData","newTwoDaySnowLitBear","lastWeekSnowCoqSum","newLastWeekSnowCoqSum","lastWeekSnowLitBea","newLastWeekSnowLitBear","getNewSnowCoqSum","getNewSnowLitBea","getNewTwoSnowCoqSum","getNewTwoSnowLitBea","getNewLastWeekSnowCoqSum","getNewLastWeekSnowLitBea","sumNewSnowCoq","reduce","a","b","sumNewSnowLitBea","sumNewTwoDaySnowCoq","sumNewTwoDaySnowLitBea","sumNewLastWeekSnowCoq","sumNewLastWeekSnowLitBea","coqSummitLastDay","coqSummitLastTwoDay","coqSummitLastWeek","littleBearLastDay","littleBearLastTwoDay","littleBearLastWeek","getSnowPackData","arr","dataArray","dateArray","i","length","date","charAt","push","snowpack","littleBearSnowData","coqSummitSnowData","coqSummitName","coqSummitElevation","coqSummitStation","coqSummitTemp","airTempAvg","coqSummitNewSnowLastDay","coqSummitNewSnowLastTwoDay","coqSummitNewSnowLastWeek","coqSummitSnowDepth","littleBearName","littleBearElevation","littleBearStation","littleBearTemp","littleBearNewSnowLastDay","littleBearNewSnowTwoDay","littleBearNewSnowLastWeek","littleBearSnowDepth","toUpperCase"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled from \"@emotion/styled\";\nimport size from \"../styles/size\";\nimport colors from '../styles/colors';\nimport { WeatherDetailsList } from './WeatherDetailsList';\nimport { SnowDetails } from './SnowDetails';\nimport { calNewSnowLastDay } from '../utils/calNewSnowLastDay';\nimport { Chart } from '../components/Chart';\nimport { data } from '../data/index';\nconst { littleBearData, coqSummitData } = data;\n\nconst Container = styled(\"main\")`\n    flex: 1;\n    grid-area: main;\n    padding: ${size.spacing};\n    overflow-y: auto;\n    overflow-x: hidden;\n    -webkit-overflow-scrolling: touch;\n    background-color: ${colors.main};\n\n    .dashboard {\n      --column-count: 3;\n      display: grid;\n      grid-template-columns: repeat(var(--column-count), 1fr);\n      grid-gap: ${size.spacing};\n    }\n\n    .column-item {\n      --column-count: 3;\n      flex-basis: calc(100%/var(--column-count));\n      grid-column-end: span 1;\n    }\n\n    .item-column {\n      flex: 1 1 50%;\n      grid-column-end: span 1;\n      padding: calc(var(${size.spacing}) / 2);\n      border: 1px solid grey;\n    }\n\n    .item-half {\n      flex: 1 1 50%;\n      height: 270px;\n      grid-column-end: span 2;\n      padding: calc(var(${size.spacing}) / 2);\n      border: 1px solid grey;\n    }\n\n    .item-full {\n      flex-basis: 100%;\n      grid-column: 1 / -1;\n    }\n`\nexport const Main = () => {\n  const [lowerStationData, setLowerStationData] = useState([]);\n  const [upperStationData, setUpperStationData] = useState([]);\n  const [newSnow, setNewSnow] = useState({\n    lowerStationLastDay: null,\n    lowerStationLastTwoDay: null,\n    lowerStationLastWeek: null,\n    upperStationLastDay: null,\n    upperStationLastTwoDay: null,\n    upperStationLastWeek: null,\n  });\n  const [historicSnowData, setHistoricSnowData] = useState(\n    {\n      data: {\n        labels: [],\n        datasets: [\n          { label: \"\", fill: false, backgroundColor: \"\", data: [] },\n          { label: \"\", fill: false, backgroundColor: \"\", data: [] }\n        ]\n      }\n    }\n  )\n  useEffect(() => {\n    const getWeather = async (station) => {\n\n      const url = `https://wx.avalanche.ca/stations/${station}/measurements/`;\n      const response = await fetch(url);\n      const data = await response.json();\n      setLowerStationData(data);\n    }\n    getWeather(15);\n\n  }, [])\n\n  useEffect(() => {\n    const getWeather = async (station) => {\n\n      const url = `https://wx.avalanche.ca/stations/${station}/measurements/`;\n      const response = await fetch(url);\n      const data = await response.json();\n      setUpperStationData(data)\n    }\n    getWeather(17);\n  }, [])\n\n  useEffect(() => {\n    const lastDaySnowLowerStation = lowerStationData.slice(0, 23);\n    const newSnowLowerStation = lastDaySnowLowerStation.map((day) => {\n      return day.snowHeight;\n    })\n    const lastDaySnowUpperStation = upperStationData.slice(0, 23);\n    const newSnowLitBear = lastDaySnowUpperStation.map((day) => {\n      return day.snowHeight;\n    })\n    const lastTwoDaySnowCoqSum = coqSummitStationData.slice(0, 47);\n    const newTwoDaySnowCoqSum = lastTwoDaySnowCoqSum.map((day) => {\n      return day.snowHeight;\n    })\n    const lastTwoDaySnowLitBea = littleBearStationData.slice(0, 47);\n    const newTwoDaySnowLitBear = lastTwoDaySnowLitBea.map((day) => {\n      return day.snowHeight;\n    })\n    const lastWeekSnowCoqSum = coqSummitStationData.slice(0, 160);\n    const newLastWeekSnowCoqSum = lastWeekSnowCoqSum.map((day) => {\n      return day.snowHeight;\n    })\n    const lastWeekSnowLitBea = littleBearStationData.slice(0, 160);\n    const newLastWeekSnowLitBear = lastWeekSnowLitBea.map((day) => {\n      return day.snowHeight;\n    })\n\n    const getNewSnowCoqSum = calNewSnowLastDay(newSnowLowerStation);\n    const getNewSnowLitBea = calNewSnowLastDay(newSnowLitBear);\n    const getNewTwoSnowCoqSum = calNewSnowLastDay(newTwoDaySnowCoqSum);\n    const getNewTwoSnowLitBea = calNewSnowLastDay(newTwoDaySnowLitBear);\n    const getNewLastWeekSnowCoqSum = calNewSnowLastDay(newLastWeekSnowCoqSum);\n    const getNewLastWeekSnowLitBea = calNewSnowLastDay(newLastWeekSnowLitBear);\n    const sumNewSnowCoq = getNewSnowCoqSum.reduce((a, b) => a + b, 0);\n    const sumNewSnowLitBea = getNewSnowLitBea.reduce((a, b) => a + b, 0);\n    const sumNewTwoDaySnowCoq = getNewTwoSnowCoqSum.reduce((a, b) => a + b, 0);\n    const sumNewTwoDaySnowLitBea = getNewTwoSnowLitBea.reduce((a, b) => a + b, 0);\n    const sumNewLastWeekSnowCoq = getNewLastWeekSnowCoqSum.reduce((a, b) => a + b, 0);\n    const sumNewLastWeekSnowLitBea = getNewLastWeekSnowLitBea.reduce((a, b) => a + b, 0);\n\n    setNewSnow({ coqSummitLastDay: sumNewSnowCoq, coqSummitLastTwoDay: sumNewTwoDaySnowCoq, coqSummitLastWeek: sumNewLastWeekSnowCoq, littleBearLastDay: sumNewSnowLitBea, littleBearLastTwoDay: sumNewTwoDaySnowLitBea, littleBearLastWeek: sumNewLastWeekSnowLitBea });\n  }, [lowerStationData, upperStationData])\n\n  useEffect(() => {\n    const getSnowPackData = (arr) => {\n      const dataArray = [];\n      const dateArray = [];\n      for (let i = 0; i < arr.length; i++) {\n        if (arr[i].date.charAt(11) === \"2\" && arr[i].date.charAt(12) === \"3\") {\n          dateArray.push(arr[i].date.slice(0, 10))\n          dataArray.push(arr[i].snowpack);\n        }\n      }\n      return { dataArray, dateArray };\n    };\n    const littleBearSnowData = getSnowPackData(littleBearData);\n    const coqSummitSnowData = getSnowPackData(coqSummitData);\n    setHistoricSnowData({\n      data: {\n        labels: coqSummitSnowData.dateArray,\n        datasets: [{ label: \"1220m\", backgroundColor: \"#50D8D7\", data: coqSummitSnowData.dataArray }, { label: \"1660m\", backgroundColor: \"#547AA5\", data: littleBearSnowData.dataArray }]\n      }\n    })\n  }, [])\n\n  const coqSummitName = \"Coquihalla Summit\";\n  const coqSummitElevation = \"1230m\"\n  const coqSummitStation = coqSummitStationData && coqSummitStationData[0];\n  const coqSummitTemp = coqSummitStation && coqSummitStation.airTempAvg;\n  const coqSummitNewSnowLastDay = newSnow && newSnow.coqSummitLastDay;\n  const coqSummitNewSnowLastTwoDay = newSnow && newSnow.coqSummitLastTwoDay;\n  const coqSummitNewSnowLastWeek = newSnow && newSnow.coqSummitLastWeek;\n  const coqSummitSnowDepth = coqSummitStation && coqSummitStation.snowHeight;\n\n  const littleBearName = \"Little Bear\";\n  const littleBearElevation = \"1660m\"\n  const littleBearStation = littleBearStationData && littleBearStationData[0];\n  const littleBearTemp = littleBearStation && littleBearStation.airTempAvg;\n  const littleBearNewSnowLastDay = newSnow && newSnow.littleBearLastDay;\n  const littleBearNewSnowTwoDay = newSnow && newSnow.littleBearLastTwoDay;\n  const littleBearNewSnowLastWeek = newSnow && newSnow.littleBearLastWeek;\n  const littleBearSnowDepth = littleBearStation && littleBearStation.snowHeight;\n\n  return (\n    <Container>\n      <div className=\"dashboard\">\n        <div className=\"item-column\">\n          {/* <div className=\"card\"> */}\n          <WeatherDetailsList\n            highElevationName={littleBearName.toUpperCase()}\n            highElevation={littleBearElevation}\n            lowElevationName={coqSummitName.toUpperCase()}\n            lowElevation={coqSummitElevation}\n            highTemp={littleBearTemp}\n            lowTemp={coqSummitTemp} />\n        </div>\n        <div className=\"item-half\">\n          <SnowDetails\n            lowElevationName={coqSummitName}\n            lowElevation={coqSummitElevation}\n            newSnowLastDayCoq={coqSummitNewSnowLastDay}\n            newSnowLastTwoDayCoq={coqSummitNewSnowLastTwoDay}\n            newSnowLastWeekCoq={coqSummitNewSnowLastWeek}\n            snowDepthCoq={coqSummitSnowDepth}\n            highElevationName={littleBearName}\n            highElevation={littleBearElevation}\n            newSnowLastDayLit={littleBearNewSnowLastDay}\n            newSnowLastTwoDayLit={littleBearNewSnowTwoDay}\n            newSnowLastWeekLit={littleBearNewSnowLastWeek}\n            snowDepthLit={littleBearSnowDepth} />\n        </div>\n        <div className=\"item-full\">\n          <div className=\"card\">\n            <Chart data={historicSnowData.data} />\n          </div>\n        </div>\n      </div >\n    </Container >\n  )\n}"]},"metadata":{},"sourceType":"module"}